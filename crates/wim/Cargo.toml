[package]
name = "wim"
version = "0.1.0"
edition = "2021"
authors = ["rotko <hq@rotko.net>"]
license = "MIT"
repository = "https://github.com/rotkonetworks/zeratul"
description = "WIM (Witness Indistinguishable Machine) - ZK signing and RISC-V execution proofs"
keywords = ["wim", "zk-signing", "witness-indistinguishable", "risc-v", "execution-proof"]
categories = ["cryptography", "no-std", "wasm"]

[lib]
crate-type = ["rlib"]

[features]
default = ["std"]

# Environment
std = [
    "ligerito/std",
    "ligerito-binary-fields/std",
    "ligerito-merkle/std",
    "serde/std",
    "thiserror",
]

# PolkaVM integration
polkavm-integration = [
    "std",
    "polkavm",
    "polkavm-common",
]

[dependencies]
# Ligerito proving library (with prover feature for ProverConfig)
ligerito = { version = "0.4.0", path = "../ligerito", default-features = false, features = ["prover", "parallel"] }
ligerito-binary-fields = { version = "0.4.0", path = "../ligerito-binary-fields", default-features = false, features = ["serde"] }
ligerito-merkle = { version = "0.4.0", path = "../ligerito-merkle", default-features = false, features = ["serde"] }

# Core dependencies
serde = { workspace = true, default-features = false, features = ["derive", "alloc"] }
bytemuck = { workspace = true }

# Crypto (sha256 always available for no_std)
sha2 = { workspace = true, default-features = false }
sha3 = { version = "0.10", default-features = false }

# PolkaVM integration (optional)
polkavm = { git = "https://github.com/paritytech/polkavm", optional = true }
polkavm-common = { git = "https://github.com/paritytech/polkavm", optional = true }

# Error handling (std only)
thiserror = { workspace = true, optional = true }

[dev-dependencies]
polkavm-assembler = { git = "https://github.com/paritytech/polkavm" }
criterion = { workspace = true }

[[bench]]
name = "crypto_comparison"
harness = false
